jQuery(function(o){var e,t=null;function c(){o(".ywbc-action-results").empty();var a,e=t.closest('form[name="yith-barcodes-form"]');e.find('input[name="yith-barcode-value"]').val()&&(a={action:"barcode_actions_search_"+e.data("barcode-type"),text:e.find('input[name="yith-barcode-value"]').val(),"barcode-actions":e.data("barcode-actions")},e.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),o.post(ywbc_data.ajax_url,a,function(a){1==a.code?(e.append('<div class="ywbc-action-results">'+a.items+"</div>"),a.redirect_page&&window.open(a.redirect_page,"_blank")):-1==a.code&&(e.append('<div class="ywbc-action-results error">'+a.items+"</div>"),console.log("Error -> "+a.items)),e.unblock()}))}o('form[name="yith-barcodes-form"]').submit(function(a){a.preventDefault()}),o('input[name="yith-barcode-value"]').on("keyup",function(a){a.preventDefault(),e&&clearTimeout(e),t=o(this),e=setTimeout(c,1e3)}),o(document).on("click","button.ywbc-action",function(a){a.preventDefault();var e=o(this).closest(".yith-barcode-actions"),a=t.closest('form[name="yith-barcodes-form"]'),c=o(this).closest("tr.ywbc-search-row"),a={action:"apply_barcode_action",status:o(this).data("status"),type:o(this).data("type"),"barcode-actions":a.data("barcode-actions"),id:o(this).data("id")};e.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),o.post(ywbc_data.ajax_url,a,function(a){1==a.code&&c.replaceWith(a.items),e.unblock()})});var r=o("#ywbc_barcode_value img.ywbc-barcode-image").length?o("#ywbc_barcode_value img.ywbc-barcode-image").attr("src"):"",i=o("#ywbc_barcode_value .ywbc-barcode-display-value").length?o("#ywbc_barcode_value .ywbc-barcode-display-value").text():"";o(document).on("found_variation","form.variations_form",function(a,e){$variation_barcode_img=e.barcode_img||r,$variation_barcode_value=e.barcode_img?e.barcode_value:i,""!=$variation_barcode_img&&(o("img.ywbc-barcode-image").length?(o("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",$variation_barcode_img),o("#ywbc_barcode_value .ywbc-barcode-display-value").text($variation_barcode_value)):o("#ywbc_barcode_value").append('<img class="ywbc-barcode-image" src="'+$variation_barcode_img+'"><div class="ywbc-barcode-display-container"><span class="ywbc-barcode-display-value">'+$variation_barcode_value+"</span></div>"))}).on("reset_image",function(a){o("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",r),o("#ywbc_barcode_value .ywbc-barcode-display-value").text(i)})});