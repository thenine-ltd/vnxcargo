jQuery(function(i){i(document).on("click",".ywbc_apply_barcode",function(e){e.preventDefault();var a=i(this).data("item_ids"),n=i(this).data("barcode_action"),c=i("#ywbc_apply_progressbar_all"),t=i("#ywbc_apply_progressbar_percent_all"),r=i(".ywbc_apply_messages"),s=i(this).parent().parent().parent().find("[data-dep-target='ywbc_tool_regenerate_barcodes'] ").find("#ywbc_tool_regenerate_barcodes").val();r.hide(),c.progressbar(),t.html("0% (0/"+a.length+")"),c.show();var l=a.length;i(this).prop("disabled",!0),function d(o,e){e={ywbc_item_id:e,mode:s,action:n};i.ajax({type:"POST",url:ywbc_params.ajax_url,data:e,dataType:"json",success:function(e){"barcode_created"==e.result?(c.progressbar("value",(o+1)/l*100),t.html(Math.round((o+1)/l*1e3)/10+"% ("+(o+1)+"/"+a.length+")"),o<l-1?d(++o,a[o]):(r.addClass("complete_all_task"),r.find(".ywbc_apply_icon").addClass("dashicons dashicons-yes"),r.find(".ywbc_apply_icon").css("color","green"),r.find(".ywbc_apply_text").html(ywbc_params.messages.complete_task),r.show(),c.hide(),i(".ywbc_apply_barcode").prop("disabled",!1))):(r.addClass("error_task"),r.find(".ywbc_apply_icon").addClass("dashicons dashicons-no"),r.find(".ywbc_apply_icon").css("color","red"),r.find(".ywbc_apply_text").html(ywbc_params.messages.error_task),r.show(),c.hide(),i(".ywbc_apply_barcode").prop("disabled",!1))}})}(0,a[0])}),i(document).on("change","#ywbc_tool_regenerate_barcodes",function(e){e.preventDefault();var e=i(this).val(),o=i(this).parent();o.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}});e={action:"regenerate_barcodes_selector_change",mode:e};i.ajax({type:"POST",url:ywbc_params.ajax_url,data:e,success:function(e){document.location.reload(),o.unblock()},error:function(e){o.unblock(),console.log("ERROR"),console.log(e)}})}),i(document).on("change","#ywbc_enable_print_barcodes_variations",function(e){e.preventDefault();var e=i(this).val(),o=i(this).parent();o.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}});e={action:"print_barcodes_selector_change",mode:e};i.ajax({type:"POST",url:ywbc_params.ajax_url,data:e,success:function(e){document.location.reload(),o.unblock()},error:function(e){o.unblock(),console.log("ERROR"),console.log(e)}})}),i(document).on("click",".ywbc-print-barcode",function(e){e.preventDefault();var e=i(this).data("item_ids"),o=i(".ywbc-print-barcode-tr"),e={action:"print_product_barcodes_document",ywbc_item_ids:e};o.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}}),i.ajax({type:"POST",url:ywbc_params.ajax_url,data:e,success:function(e){console.log("Processing, do not cancel"),i("#aux-print-barcodes").append(e.result);e=document.getElementById("aux-print-barcodes");newWin=window.open("about:blank"),newWin.document.write(e.outerHTML),setTimeout(function(){newWin.print(),newWin.close()},200),i("#aux-print-barcodes").html(""),o.unblock()},error:function(e){return console.log("ERROR"),console.log(e),o.unblock(),!1}})}),i(document).on("click",".ywbc-print-barcode-by-product",function(e){e.preventDefault();var o,a=i(this).parent().find("#print_barcodes_by_product_select option:last-child").val(),e=i(this).parent().find(".ywbc-print-barcode-by-product-quantity").val();null!=a?(e={action:"print_barcodes_by_product_document",ywbc_product_id:a,ywbc_product_quantity:e=""==e?1:e},(o=i(".ywbc-print-barcode-by-product-tr")).block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}}),i.ajax({type:"POST",url:ywbc_params.ajax_url,data:e,success:function(e){console.log("Processing, do not cancel"),i("#aux-print-barcodes-by-products").append(e.result);e=document.getElementById("aux-print-barcodes-by-products");newWin=window.open("about:blank"),newWin.document.write(e.outerHTML),setTimeout(function(){newWin.print(),newWin.close()},200),i("#aux-print-barcodes-by-products").html(""),o.unblock()},error:function(e){return console.log("ERROR"),console.log(e),o.unblock(),!1}})):alert("Select a product")})});